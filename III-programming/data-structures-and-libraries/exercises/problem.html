<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-05-08 Mon 16:07 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Programming exercises Programming exercises</title>
<meta name="author" content="Boban Joksimoski" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Programming exercises Programming exercises</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgd6ecb21">1. Browser history</a>
<ul>
<li><a href="#orgac6413b">1.1. Implement the <code>BrowserHistory</code> class:</a></li>
<li><a href="#orgf2c4d8f">1.2. Example</a></li>
<li><a href="#orgcab4e7a">1.3. Constraints:</a></li>
<li><a href="#orga3814e7">1.4. Analysis</a></li>
<li><a href="#orgdfa70e7">1.5. Test scenario</a></li>
<li><a href="#org7b6967e">1.6. Starter code</a></li>
<li><a href="#org5bfea41">1.7. Solution</a></li>
</ul>
</li>
<li><a href="#orga5b97e2">2. Bipartite Graph</a>
<ul>
<li><a href="#orge77d960">2.1. Examples:</a>
<ul>
<li><a href="#org4328bf0">2.1.1. Example 1:</a></li>
<li><a href="#org9a40bcb">2.1.2. Example 2:</a></li>
</ul>
</li>
<li><a href="#org092c885">2.2. Constraints:</a></li>
<li><a href="#org4836a90">2.3. Analysis</a></li>
<li><a href="#org75d8b68">2.4. Solutions</a>
<ul>
<li><a href="#org92199c6">2.4.1. Bipartite Graph solution using BFS</a></li>
<li><a href="#org794f8ef">2.4.2. Bipartite Graph solution using DFS</a></li>
<li><a href="#org0a237fb">2.4.3. Bipartite Graph solution using Union-Find</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9da20e9">3. Reverse Pairs</a>
<ul>
<li><a href="#orgf5d386a">3.1. Examples:</a>
<ul>
<li><a href="#org19ba24c">3.1.1. Example 1:</a></li>
<li><a href="#org2100415">3.1.2. Example 2:</a></li>
</ul>
</li>
<li><a href="#org2acfd3a">3.2. Constraints:</a></li>
<li><a href="#org5ff7aaf">3.3. Starter code</a></li>
<li><a href="#orgeeb7580">3.4. Solution ideas</a></li>
<li><a href="#org60651c8">3.5. Solution</a>
<ul>
<li><a href="#org21eb9a6">3.5.1. Brute force algorithm</a></li>
<li><a href="#org4154253">3.5.2. Using Divide and Conquer and Merge sort</a></li>
<li><a href="#orge01a574">3.5.3. Using segment tree</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgd6ecb21" class="outline-2">
<h2 id="orgd6ecb21"><span class="section-number-2">1.</span> Browser history</h2>
<div class="outline-text-2" id="text-1">
<p>
You have a browser of one tab where you start on the homepage and you can visit another url, get back in the history
number of steps or move forward in the history number of steps.
</p>
</div>

<div id="outline-container-orgac6413b" class="outline-3">
<h3 id="orgac6413b"><span class="section-number-3">1.1.</span> Implement the <code>BrowserHistory</code> class:</h3>
<div class="outline-text-3" id="text-1-1">
<dl class="org-dl">
<dt><code>BrowserHistory(string homepage)</code></dt><dd>Initializes the object with the homepage of the browser.</dd>
<dt><code>void visit(string url)</code></dt><dd>Visits <code>url</code> from the current page. It clears up all the forward history.</dd>
<dt><code>string back(int steps)</code></dt><dd>Move <code>steps</code> back in history. If you can only return <code>x</code> steps in the history and <code>steps &gt; x</code>, you will return only <code>x</code> steps.
Return the current <code>url</code> after moving back in history at most <code>steps</code>.</dd>
<dt><code>string forward(int steps)</code></dt><dd>Move <code>steps</code> forward in history. If you can only forward <code>x steps</code> in the history and <code>steps &gt; x</code>, you will forward only <code>x steps</code>.
Return the current <code>url</code> after forwarding in history at most <code>steps</code>.</dd>
</dl>
</div>
</div>

<div id="outline-container-orgf2c4d8f" class="outline-3">
<h3 id="orgf2c4d8f"><span class="section-number-3">1.2.</span> Example</h3>
<div class="outline-text-3" id="text-1-2">
<pre class="example" id="orgd6b71e8">
Input:
["BrowserHistory","visit","visit","visit","back","back","forward","visit","forward","back","back"]
[["mig.mk"],["google.com"],["facebook.com"],["youtube.com"],[1],[1],[1],["linkedin.com"],[2],[2],[7]]

Output:
[null,null,null,null,"facebook.com","google.com","facebook.com",null,"linkedin.com","google.com","mig.mk"]

Explanation:
BrowserHistory browserHistory = new BrowserHistory("mig.mk");
browserHistory.visit("google.com");       // You are in "mig.mk". Visit "google.com"
browserHistory.visit("facebook.com");     // You are in "google.com". Visit "facebook.com"
browserHistory.visit("youtube.com");      // You are in "facebook.com". Visit "youtube.com"
browserHistory.back(1);                   // You are in "youtube.com", move back to "facebook.com" return "facebook.com"
browserHistory.back(1);                   // You are in "facebook.com", move back to "google.com" return "google.com"
browserHistory.forward(1);                // You are in "google.com", move forward to "facebook.com" return "facebook.com"
browserHistory.visit("linkedin.com");     // You are in "facebook.com". Visit "linkedin.com"
browserHistory.forward(2);                // You are in "linkedin.com", you cannot move forward any steps.
browserHistory.back(2);                   // You are in "linkedin.com", move back two steps to "facebook.com" then to "google.com". return "google.com"
browserHistory.back(7);                   // You are in "google.com", you can move back only one step to "mig.mk". return "mig.mk"
</pre>
</div>
</div>


<div id="outline-container-orgcab4e7a" class="outline-3">
<h3 id="orgcab4e7a"><span class="section-number-3">1.3.</span> Constraints:</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li>1 &lt;= homepage.length &lt;= 20</li>
<li>1 &lt;= url.length &lt;= 20</li>
<li>1 &lt;= steps &lt;= 100</li>
<li>homepage and url consist of  &rsquo;.&rsquo; or lower case English letters.</li>
<li>At most 5000 calls will be made to visit, back, and forward.</li>
</ul>
</div>
</div>

<div id="outline-container-orga3814e7" class="outline-3">
<h3 id="orga3814e7"><span class="section-number-3">1.4.</span> Analysis</h3>
<div class="outline-text-3" id="text-1-4">
<p>
One approach is to use two stacks, one for <code>history</code>, one to save the <code>future</code> pages.
</p>
</div>
</div>

<div id="outline-container-orgdfa70e7" class="outline-3">
<h3 id="orgdfa70e7"><span class="section-number-3">1.5.</span> Test scenario</h3>
<div class="outline-text-3" id="text-1-5">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Test scenario</label><pre class="src src-cpp"><span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">string</span><span style="color: #51afef;">&gt;</span>

<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">string</span>;

<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span><span style="color: #51afef;">(){</span>
<span style="color: #ECBE7B;">BrowserHistory</span> <span style="color: #dcaeea;">history</span> = <span style="color: #51afef;">new</span> <span style="color: #ECBE7B;">BrowserHistory</span><span style="color: #c678dd;">(</span><span style="color: #98be65;">"https://www.google.com"</span><span style="color: #c678dd;">)</span>;

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">User visits a few pages</span>
history.visit<span style="color: #c678dd;">(</span><span style="color: #98be65;">"https://www.google.com/search?q=java"</span><span style="color: #c678dd;">)</span>;
history.visit<span style="color: #c678dd;">(</span><span style="color: #98be65;">"https://www.wikipedia.org/"</span><span style="color: #c678dd;">)</span>;
history.visit<span style="color: #c678dd;">(</span><span style="color: #98be65;">"https://www.amazon.com/"</span><span style="color: #c678dd;">)</span>;

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">User clicks back button once</span>
<span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">previousPage</span> = history.back<span style="color: #c678dd;">(</span><span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">)</span>;
cout &lt;&lt; <span style="color: #98be65;">"User is now on page: "</span> &lt;&lt; previousPage;

<span style="color: #5B6268;">// </span><span style="color: #5B6268;">User clicks forward button twice</span>
<span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">nextPage</span> = history.forward<span style="color: #c678dd;">(</span><span style="color: #da8548; font-weight: bold;">2</span><span style="color: #c678dd;">)</span>;
cout &lt;&lt; <span style="color: #98be65;">"User is now on page: "</span>,  nextPage;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org7b6967e" class="outline-3">
<h3 id="org7b6967e"><span class="section-number-3">1.6.</span> Starter code</h3>
<div class="outline-text-3" id="text-1-6">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Starter code</label><pre class="src src-cpp"><span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">string</span><span style="color: #51afef;">&gt;</span>

<span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">BrowserHistory</span> <span style="color: #51afef;">{</span>
<span style="color: #51afef;">public</span>:
    <span style="color: #c678dd;">BrowserHistory</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">homepage</span><span style="color: #c678dd;">){</span>

    <span style="color: #c678dd;">}</span>
    <span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">visit</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">url</span><span style="color: #c678dd;">){</span>

    <span style="color: #c678dd;">}</span>
    <span style="color: #ECBE7B;">string</span> <span style="color: #c678dd;">back</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">steps</span><span style="color: #c678dd;">){</span>

    <span style="color: #c678dd;">}</span>
    <span style="color: #ECBE7B;">string</span> <span style="color: #c678dd;">next</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">steps</span><span style="color: #c678dd;">){</span>

    <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5bfea41" class="outline-3">
<h3 id="org5bfea41"><span class="section-number-3">1.7.</span> Solution</h3>
<div class="outline-text-3" id="text-1-7">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Example solution</label><pre class="src src-cpp"><span style="color: #51afef;">class</span> <span style="color: #ECBE7B;">BrowserHistory</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">stack</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">string</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">history</span>, <span style="color: #dcaeea;">future</span>;
    <span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">current</span>;
<span style="color: #51afef;">public</span>:
    <span style="color: #c678dd;">BrowserHistory</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">homepage</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">'homepage' is the first visited URL.</span>
        current = homepage;
    <span style="color: #c678dd;">}</span>

    <span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">visit</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">string</span> <span style="color: #dcaeea;">url</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Push 'current' in 'history' stack and mark 'url' as 'current'.</span>
        history.push<span style="color: #98be65;">(</span>current<span style="color: #98be65;">)</span>;
        current = url;
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">We need to delete all entries from 'future' stack.</span>
        future = stack<span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">string</span><span style="color: #98be65;">&gt;()</span>;
    <span style="color: #c678dd;">}</span>

    <span style="color: #ECBE7B;">string</span> <span style="color: #c678dd;">back</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">steps</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Pop elements from 'history' stack, and push elements in 'future' stack.</span>
        <span style="color: #51afef;">while</span><span style="color: #98be65;">(</span>steps &gt; <span style="color: #da8548; font-weight: bold;">0</span> &amp;&amp; <span style="color: #51afef; font-weight: bold;">!</span>history.empty<span style="color: #a9a1e1;">()</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            future.push<span style="color: #a9a1e1;">(</span>current<span style="color: #a9a1e1;">)</span>;
            current = history.top<span style="color: #a9a1e1;">()</span>;
            history.pop<span style="color: #a9a1e1;">()</span>;
            steps--;
        <span style="color: #98be65;">}</span>
        <span style="color: #51afef;">return</span> current;
    <span style="color: #c678dd;">}</span>

    <span style="color: #ECBE7B;">string</span> <span style="color: #c678dd;">forward</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">steps</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Pop elements from 'future' stack, and push elements in 'history' stack.</span>
        <span style="color: #51afef;">while</span><span style="color: #98be65;">(</span>steps &gt; <span style="color: #da8548; font-weight: bold;">0</span> &amp;&amp; <span style="color: #51afef; font-weight: bold;">!</span>future.empty<span style="color: #a9a1e1;">()</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            history.push<span style="color: #a9a1e1;">(</span>current<span style="color: #a9a1e1;">)</span>;
            current = future.top<span style="color: #a9a1e1;">()</span>;
            future.pop<span style="color: #a9a1e1;">()</span>;
            steps--;
        <span style="color: #98be65;">}</span>
        <span style="color: #51afef;">return</span> current;
    <span style="color: #c678dd;">}</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga5b97e2" class="outline-2">
<h2 id="orga5b97e2"><span class="section-number-2">2.</span> Bipartite Graph</h2>
<div class="outline-text-2" id="text-2">
<p>
There is an undirected graph with <code>n</code> nodes, where each node is numbered between <code>0</code> and <code>n-1</code>. You are given a 2D array graph, where <code>graph[u]</code> is an array of nodes that node <code>u</code> is adjacent to. More formally, for each <code>v</code> in <code>graph[u]</code>, there is an undirected edge between node <code>u</code> and node <code>v</code>. The graph has the following properties:
</p>

<ul class="org-ul">
<li>There are no self-edges (<code>graph[u]</code> does not contain <code>u</code>).</li>
<li>There are no parallel edges (<code>graph[u]</code> does not contain duplicate values).</li>
<li>If <code>v</code> is in <code>graph[u]</code>, then <code>u</code> is in <code>graph[v]</code> (the graph is undirected).</li>
<li>The graph may not be connected, meaning there may be two nodes <code>u</code> and <code>v</code> such that there is no path between them.</li>
</ul>

<p>
A graph is bipartite if the nodes can be partitioned into two independent sets <code>A</code> and <code>B</code> such that every edge in the graph connects a node in set <code>A</code> and a node in set <code>B</code>.
</p>

<p>
Return <code>true</code> if and only if it is bipartite.
</p>
</div>

<div id="outline-container-orge77d960" class="outline-3">
<h3 id="orge77d960"><span class="section-number-3">2.1.</span> Examples:</h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-org4328bf0" class="outline-4">
<h4 id="org4328bf0"><span class="section-number-4">2.1.1.</span> Example 1:</h4>
<div class="outline-text-4" id="text-2-1-1">

<div id="orge60d2ad" class="figure">
<p><img src="./img/bi2.jpg" alt="bi2.jpg" />
</p>
<p><span class="figure-number">Figure 1: </span>Example graph 1</p>
</div>

<div class="verbatim" id="org1cff385">
<p>
Input: graph = [[1,2,3],[0,2],[0,1,3],[0,2]]
Output: false
</p>

</div>

<dl class="org-dl">
<dt>Explanation</dt><dd>There is no way to partition the nodes into two independent sets such that every edge connects a node in one and a node in the other.</dd>
</dl>
</div>
</div>

<div id="outline-container-org9a40bcb" class="outline-4">
<h4 id="org9a40bcb"><span class="section-number-4">2.1.2.</span> Example 2:</h4>
<div class="outline-text-4" id="text-2-1-2">

<div id="org8670f5f" class="figure">
<p><img src="./img/bi1.jpg" alt="bi1.jpg" />
</p>
<p><span class="figure-number">Figure 2: </span>Example graph 2</p>
</div>

<div class="verbatim" id="orgc3ef9ae">
<p>
Input: graph = [[1,3],[0,2],[1,3],[0,2]]
Output: true
</p>

</div>
<p>
<b>Explanation:</b> We can partition the nodes into two sets: {0, 2} and {1, 3}.
</p>
</div>
</div>
</div>

<div id="outline-container-org092c885" class="outline-3">
<h3 id="org092c885"><span class="section-number-3">2.2.</span> Constraints:</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li><code>graph.length == n</code></li>
<li><code>1 &lt;= n &lt;= 100</code></li>
<li><code>0 &lt;= graph[u].length &lt; n</code></li>
<li><code>0 &lt;= graph[u][i] &lt;= n - 1</code></li>
<li><code>graph[u]</code> does not contain <code>u</code>.</li>
<li>All the values of <code>graph[u]</code> are unique.</li>
<li>If <code>graph[u]</code> contains <code>v</code>, then <code>graph[v]</code> contains <code>u</code>.</li>
</ul>
</div>
</div>


<div id="outline-container-org4836a90" class="outline-3">
<h3 id="org4836a90"><span class="section-number-3">2.3.</span> Analysis</h3>
<div class="outline-text-3" id="text-2-3">
<p>
The obvious approach is to use BFS or DFS to traverse the graph.
</p>
</div>
</div>

<div id="outline-container-org75d8b68" class="outline-3">
<h3 id="org75d8b68"><span class="section-number-3">2.4.</span> Solutions</h3>
<div class="outline-text-3" id="text-2-4">
</div>
<div id="outline-container-org92199c6" class="outline-4">
<h4 id="org92199c6"><span class="section-number-4">2.4.1.</span> Bipartite Graph solution using BFS</h4>
<div class="outline-text-4" id="text-2-4-1">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">iostream</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">queue</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">vector</span><span style="color: #51afef;">&gt;</span>

<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">vector</span>;
<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">queue</span>;

<span style="color: #ECBE7B;">bool</span> <span style="color: #c678dd;">bfs</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">node</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">color</span>, <span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">vector</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">graph</span>, <span style="color: #ECBE7B;">vector</span> <span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">visited</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">queue</span> <span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">q</span>;
    q.push<span style="color: #c678dd;">(</span>node<span style="color: #c678dd;">)</span>;
    visited<span style="color: #c678dd;">[</span>node<span style="color: #c678dd;">]</span> = color;
    <span style="color: #51afef;">while</span> <span style="color: #c678dd;">(</span><span style="color: #51afef; font-weight: bold;">!</span>q.empty<span style="color: #98be65;">()</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">curr</span> = q.front<span style="color: #98be65;">()</span>;
        q.pop<span style="color: #98be65;">()</span>;
        <span style="color: #51afef;">for</span> <span style="color: #98be65;">(</span><span style="color: #51afef;">auto</span> <span style="color: #dcaeea;">adjNode</span>: graph<span style="color: #a9a1e1;">[</span>curr<span style="color: #a9a1e1;">]</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef;">if</span> <span style="color: #a9a1e1;">(</span>visited<span style="color: #51afef;">[</span>adjNode<span style="color: #51afef;">]</span> == -<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #a9a1e1;">)</span> <span style="color: #a9a1e1;">{</span>
                q.push<span style="color: #51afef;">(</span>adjNode<span style="color: #51afef;">)</span>;
                visited<span style="color: #51afef;">[</span>adjNode<span style="color: #51afef;">]</span> = <span style="color: #51afef; font-weight: bold;">!</span>visited<span style="color: #51afef;">[</span>curr<span style="color: #51afef;">]</span>;
            <span style="color: #a9a1e1;">}</span> <span style="color: #51afef;">else</span> <span style="color: #51afef;">if</span> <span style="color: #a9a1e1;">(</span>visited<span style="color: #51afef;">[</span>adjNode<span style="color: #51afef;">]</span> == visited<span style="color: #51afef;">[</span>curr<span style="color: #51afef;">]</span><span style="color: #a9a1e1;">)</span> <span style="color: #a9a1e1;">{</span>
                <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">false</span>;
            <span style="color: #a9a1e1;">}</span>
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">true</span>;
<span style="color: #51afef;">}</span>
<span style="color: #ECBE7B;">bool</span> <span style="color: #c678dd;">isBipartite</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">vector</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">graph</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">n</span> = graph.size<span style="color: #c678dd;">()</span>; <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Get the node number</span>
    <span style="color: #ECBE7B;">vector</span> <span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">visited</span><span style="color: #c678dd;">(</span>n, -<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">)</span>; <span style="color: #5B6268;">// </span><span style="color: #5B6268;">Create visited vector for every node</span>
    <span style="color: #51afef;">for</span> <span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = <span style="color: #da8548; font-weight: bold;">0</span>; i &lt; n; i++<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">if</span> <span style="color: #98be65;">(</span>visited<span style="color: #a9a1e1;">[</span>i<span style="color: #a9a1e1;">]</span> == -<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef;">if</span> <span style="color: #a9a1e1;">(</span>bfs<span style="color: #51afef;">(</span>i, <span style="color: #da8548; font-weight: bold;">0</span>, graph, visited<span style="color: #51afef;">)</span> == <span style="color: #a9a1e1;">false</span><span style="color: #a9a1e1;">)</span>
                <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">false</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">true</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
Similatrly, we can use DFS instead of BFS
</p>
</div>
</div>

<div id="outline-container-org794f8ef" class="outline-4">
<h4 id="org794f8ef"><span class="section-number-4">2.4.2.</span> Bipartite Graph solution using DFS</h4>
<div class="outline-text-4" id="text-2-4-2">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">iostream</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">vector</span><span style="color: #51afef;">&gt;</span>

<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">vector</span>;

<span style="color: #ECBE7B;">bool</span> <span style="color: #c678dd;">dfs</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">node</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">color</span>, <span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">vector</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">graph</span>, <span style="color: #ECBE7B;">vector</span> <span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">visited</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    visited<span style="color: #c678dd;">[</span>node<span style="color: #c678dd;">]</span> = color;
    <span style="color: #51afef;">for</span> <span style="color: #c678dd;">(</span><span style="color: #51afef;">auto</span> <span style="color: #dcaeea;">adjNode</span>: graph<span style="color: #98be65;">[</span>node<span style="color: #98be65;">]</span><span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">if</span> <span style="color: #98be65;">(</span>visited<span style="color: #a9a1e1;">[</span>adjNode<span style="color: #a9a1e1;">]</span> == -<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef;">if</span> <span style="color: #a9a1e1;">(</span>dfs<span style="color: #51afef;">(</span>adjNode, <span style="color: #51afef; font-weight: bold;">!</span>color, graph, visited<span style="color: #51afef;">)</span> == <span style="color: #a9a1e1;">false</span><span style="color: #a9a1e1;">)</span>
                <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">false</span>;
        <span style="color: #98be65;">}</span> <span style="color: #51afef;">else</span> <span style="color: #51afef;">if</span> <span style="color: #98be65;">(</span>visited<span style="color: #a9a1e1;">[</span>adjNode<span style="color: #a9a1e1;">]</span> == color<span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">false</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">true</span>;
<span style="color: #51afef;">}</span>

<span style="color: #ECBE7B;">bool</span> <span style="color: #c678dd;">isBipartite</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">vector</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">graph</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">n</span> = graph.size<span style="color: #c678dd;">()</span>;
    <span style="color: #ECBE7B;">vector</span> <span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">visited</span><span style="color: #c678dd;">(</span>n, -<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">)</span>;
    <span style="color: #51afef;">for</span> <span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = <span style="color: #da8548; font-weight: bold;">0</span>; i &lt; n; i++<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">if</span> <span style="color: #98be65;">(</span>visited<span style="color: #a9a1e1;">[</span>i<span style="color: #a9a1e1;">]</span> == -<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef;">if</span> <span style="color: #a9a1e1;">(</span>dfs<span style="color: #51afef;">(</span>i, <span style="color: #da8548; font-weight: bold;">0</span>, graph, visited<span style="color: #51afef;">)</span> == <span style="color: #a9a1e1;">false</span><span style="color: #a9a1e1;">)</span>
                <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">false</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">true</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
But this is a primer on how we can utilize <code>Union-Find</code>.
</p>
</div>
</div>
<div id="outline-container-org0a237fb" class="outline-4">
<h4 id="org0a237fb"><span class="section-number-4">2.4.3.</span> Bipartite Graph solution using Union-Find</h4>
<div class="outline-text-4" id="text-2-4-3">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">iostream</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">vector</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">utility</span><span style="color: #51afef;">&gt;</span> <span style="color: #5B6268;">// </span><span style="color: #5B6268;">For std::pair</span>

<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">vector</span>;
<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">pair</span>;


<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">find</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">pair</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span>,<span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span> &amp;<span style="color: #dcaeea;">parent</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">k</span><span style="color: #51afef;">){</span>
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>parent<span style="color: #98be65;">[</span>k<span style="color: #98be65;">]</span>.first == -<span style="color: #da8548; font-weight: bold;">1</span> || parent<span style="color: #98be65;">[</span>k<span style="color: #98be65;">]</span>.first==k<span style="color: #c678dd;">){</span>
        parent<span style="color: #98be65;">[</span>k<span style="color: #98be65;">]</span>.first = k;
        <span style="color: #51afef;">return</span> k;
    <span style="color: #c678dd;">}</span>
    parent<span style="color: #c678dd;">[</span>k<span style="color: #c678dd;">]</span>.first=find<span style="color: #c678dd;">(</span>parent,parent<span style="color: #98be65;">[</span>k<span style="color: #98be65;">]</span>.first<span style="color: #c678dd;">)</span>;
    <span style="color: #51afef;">return</span> parent<span style="color: #c678dd;">[</span>k<span style="color: #c678dd;">]</span>.first;
<span style="color: #51afef;">}</span>

<span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">unionFind</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">pair</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span>,<span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span> &amp;<span style="color: #dcaeea;">parent</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">x</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">y</span><span style="color: #51afef;">){</span>
   <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">a</span> = find<span style="color: #c678dd;">(</span>parent,x<span style="color: #c678dd;">)</span>;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">b</span> = find<span style="color: #c678dd;">(</span>parent,y<span style="color: #c678dd;">)</span>;
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>a != b<span style="color: #c678dd;">){</span>
       <span style="color: #51afef;">if</span><span style="color: #98be65;">(</span>parent<span style="color: #a9a1e1;">[</span>a<span style="color: #a9a1e1;">]</span>.second &lt; parent<span style="color: #a9a1e1;">[</span>b<span style="color: #a9a1e1;">]</span>.second<span style="color: #98be65;">){</span>
           parent<span style="color: #a9a1e1;">[</span>a<span style="color: #a9a1e1;">]</span>.first=b;
       <span style="color: #98be65;">}</span><span style="color: #51afef;">else</span> <span style="color: #51afef;">if</span><span style="color: #98be65;">(</span>parent<span style="color: #a9a1e1;">[</span>a<span style="color: #a9a1e1;">]</span>.second &gt; parent<span style="color: #a9a1e1;">[</span>b<span style="color: #a9a1e1;">]</span>.second<span style="color: #98be65;">){</span>
            parent<span style="color: #a9a1e1;">[</span>b<span style="color: #a9a1e1;">]</span>.first=a;
        <span style="color: #98be65;">}</span><span style="color: #51afef;">else</span><span style="color: #98be65;">{</span>
            parent<span style="color: #a9a1e1;">[</span>b<span style="color: #a9a1e1;">]</span>.first=a;
            parent<span style="color: #a9a1e1;">[</span>a<span style="color: #a9a1e1;">]</span>.second += <span style="color: #da8548; font-weight: bold;">1</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
<span style="color: #ECBE7B;">bool</span> <span style="color: #c678dd;">isBipartite</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">vector</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">graph</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">n</span> =graph.size<span style="color: #c678dd;">()</span>;
    <span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">pair</span><span style="color: #98be65;">&lt;</span><span style="color: #ECBE7B;">int</span>,<span style="color: #ECBE7B;">int</span><span style="color: #98be65;">&gt;</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">parent</span><span style="color: #c678dd;">(</span>n,<span style="color: #98be65;">{</span>-<span style="color: #da8548; font-weight: bold;">1</span>,<span style="color: #da8548; font-weight: bold;">0</span><span style="color: #98be65;">}</span><span style="color: #c678dd;">)</span>;
    <span style="color: #51afef;">for</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span>=<span style="color: #da8548; font-weight: bold;">0</span>;i&lt;n;i++<span style="color: #c678dd;">){</span>
        <span style="color: #51afef;">for</span><span style="color: #98be65;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">j</span>=<span style="color: #da8548; font-weight: bold;">0</span>;j&lt;graph<span style="color: #a9a1e1;">[</span>i<span style="color: #a9a1e1;">]</span>.size<span style="color: #a9a1e1;">()</span>;j++<span style="color: #98be65;">){</span>
         <span style="color: #5B6268;">// </span><span style="color: #5B6268;">node and neighbour shouldn't belong to same set in bipartite</span>
            <span style="color: #51afef;">if</span><span style="color: #a9a1e1;">(</span>find<span style="color: #51afef;">(</span>parent,i<span style="color: #51afef;">)</span> == find<span style="color: #51afef;">(</span>parent,graph<span style="color: #c678dd;">[</span>i<span style="color: #c678dd;">][</span>j<span style="color: #c678dd;">]</span><span style="color: #51afef;">)</span><span style="color: #a9a1e1;">){</span>
                <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">false</span>;
            <span style="color: #a9a1e1;">}</span>
            <span style="color: #5B6268;">// </span><span style="color: #5B6268;">all node neighbours should belong to one set</span>
            unionFind<span style="color: #a9a1e1;">(</span>parent,graph<span style="color: #51afef;">[</span>i<span style="color: #51afef;">][</span>j<span style="color: #51afef;">]</span>,graph<span style="color: #51afef;">[</span>i<span style="color: #51afef;">][</span><span style="color: #da8548; font-weight: bold;">0</span><span style="color: #51afef;">]</span><span style="color: #a9a1e1;">)</span>;
        <span style="color: #98be65;">}</span>
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">return</span> <span style="color: #a9a1e1;">true</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>



<div id="outline-container-org9da20e9" class="outline-2">
<h2 id="org9da20e9"><span class="section-number-2">3.</span> Reverse Pairs</h2>
<div class="outline-text-2" id="text-3">
<p>
Given an integer array <code>nums</code>, return the number of <i>reverse pairs</i> in the array.
</p>

<p>
A <i>reverse pair</i> is a pair \((i, j)\) where:
</p>
<ul class="org-ul">
<li>\(0 <= i < j < nums.length\) and</li>
<li>\(nums[i] > 2 * nums[j]\).</li>
</ul>

<p>
Please note that \[ i < j \] is a strict requirement.
</p>
</div>

<div id="outline-container-orgf5d386a" class="outline-3">
<h3 id="orgf5d386a"><span class="section-number-3">3.1.</span> Examples:</h3>
<div class="outline-text-3" id="text-3-1">
</div>
<div id="outline-container-org19ba24c" class="outline-4">
<h4 id="org19ba24c"><span class="section-number-4">3.1.1.</span> Example 1:</h4>
<div class="outline-text-4" id="text-3-1-1">
<pre class="example" id="org3a80f9f">
Input: nums = [1,3,2,3,1]

Output: 2
</pre>
<dl class="org-dl">
<dt>Explanation</dt><dd><p>
The reverse pairs are:
</p>
<pre class="example" id="org3a14133">
  (1, 4) --&gt; nums[1] = 3, nums[4] = 1, 3 &gt; 2 * 1
  (3, 4) --&gt; nums[3] = 3, nums[4] = 1, 3 &gt; 2 * 1
</pre></dd>
</dl>
</div>
</div>

<div id="outline-container-org2100415" class="outline-4">
<h4 id="org2100415"><span class="section-number-4">3.1.2.</span> Example 2:</h4>
<div class="outline-text-4" id="text-3-1-2">
<pre class="example" id="org78c430f">
Input: nums = [2,4,3,5,1]
Output: 3
</pre>
<dl class="org-dl">
<dt>Explanation</dt><dd><p>
The reverse pairs are:
</p>
<pre class="example" id="orgc2e24e9">
  (1, 4) --&gt; nums[1] = 4, nums[4] = 1, 4 &gt; 2 * 1
  (2, 4) --&gt; nums[2] = 3, nums[4] = 1, 3 &gt; 2 * 1
  (3, 4) --&gt; nums[3] = 5, nums[4] = 1, 5 &gt; 2 * 1
</pre></dd>
</dl>
</div>
</div>
</div>

<div id="outline-container-org2acfd3a" class="outline-3">
<h3 id="org2acfd3a"><span class="section-number-3">3.2.</span> Constraints:</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li>\(1 <= ~nums.length~ <= 5 * 10^4\)</li>
<li>\(-2^{31} <= ~nums[i]~ <= 2^{31} - 1\)</li>
</ul>
</div>
</div>

<div id="outline-container-org5ff7aaf" class="outline-3">
<h3 id="org5ff7aaf"><span class="section-number-3">3.3.</span> Starter code</h3>
<div class="outline-text-3" id="text-3-3">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">iostream</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">vector</span><span style="color: #51afef;">&gt;</span>
<span style="color: #51afef; font-weight: bold;">#include</span> <span style="color: #51afef;">&lt;</span><span style="color: #98be65;">string</span><span style="color: #51afef;">&gt;</span>

<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">cin</span>, <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">cout</span>;
<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">vector</span>;
<span style="color: #51afef;">using</span> <span style="color: #a9a1e1;">std</span>::<span style="color: #a9a1e1;">string</span>;

<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">main</span><span style="color: #51afef;">()</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">vector</span> <span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">nums</span>;
    <span style="color: #ECBE7B;">char</span> <span style="color: #dcaeea;">choice</span>;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">number</span>;
    <span style="color: #51afef;">while</span> <span style="color: #c678dd;">(</span><span style="color: #a9a1e1;">true</span><span style="color: #c678dd;">)</span>
    <span style="color: #c678dd;">{</span>
        cin &gt;&gt; choice; <span style="color: #5B6268;">// </span><span style="color: #5B6268;">note: it's important to discard whitespace</span>


        <span style="color: #51afef;">if</span> <span style="color: #98be65;">(</span>choice == <span style="color: #98be65;">'q'</span> || choice == <span style="color: #98be65;">'Q'</span><span style="color: #98be65;">)</span>
            <span style="color: #51afef;">break</span>;

        cin.putback<span style="color: #98be65;">(</span>choice<span style="color: #98be65;">)</span>;

        <span style="color: #51afef;">if</span> <span style="color: #98be65;">(</span><span style="color: #51afef; font-weight: bold;">!</span><span style="color: #a9a1e1;">(</span>cin &gt;&gt; number<span style="color: #a9a1e1;">)</span><span style="color: #98be65;">)</span>
            <span style="color: #51afef;">break</span>; <span style="color: #5B6268;">// </span><span style="color: #5B6268;">note: exit on error</span>

        nums.push_back<span style="color: #98be65;">(</span>number<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">for</span> <span style="color: #c678dd;">(</span><span style="color: #51afef;">auto</span> <span style="color: #dcaeea;">n</span> : nums<span style="color: #c678dd;">)</span>
        cout &lt;&lt; n &lt;&lt; <span style="color: #98be65;">" "</span>;

<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeeb7580" class="outline-3">
<h3 id="orgeeb7580"><span class="section-number-3">3.4.</span> Solution ideas</h3>
<div class="outline-text-3" id="text-3-4">
<p>
Different ways to handle
</p>
</div>
</div>

<div id="outline-container-org60651c8" class="outline-3">
<h3 id="org60651c8"><span class="section-number-3">3.5.</span> Solution</h3>
<div class="outline-text-3" id="text-3-5">
</div>
<div id="outline-container-org21eb9a6" class="outline-4">
<h4 id="org21eb9a6"><span class="section-number-4">3.5.1.</span> Brute force algorithm</h4>
<div class="outline-text-4" id="text-3-5-1">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">reversePairCount</span> = <span style="color: #da8548; font-weight: bold;">0</span>;
<span style="color: #51afef;">for</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span>=<span style="color: #da8548; font-weight: bold;">0</span>; i&lt;nums.size<span style="color: #c678dd;">()</span>; i++<span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #51afef;">for</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">j</span>=i+<span style="color: #da8548; font-weight: bold;">1</span>; j&lt;nums.size<span style="color: #98be65;">()</span>; j++<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">if</span><span style="color: #98be65;">(</span> nums<span style="color: #a9a1e1;">[</span>i<span style="color: #a9a1e1;">]</span> &gt; <span style="color: #da8548; font-weight: bold;">2</span>*nums<span style="color: #a9a1e1;">[</span>j<span style="color: #a9a1e1;">]</span><span style="color: #98be65;">)</span> reversePairCount++;
    <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>
<span style="color: #51afef;">return</span> reversePairCount;
</pre>
</div>

<ul class="org-ul">
<li>Time complexity: \(O(N^2)\)</li>
<li>Space complexity: \(O(1)\)</li>
</ul>
<p>
Where \(N\) is the size of array <code>nums</code>.
</p>

<p>
As the size of size of array <code>nums</code> can be max \(5*10^4\), this brute force approach will unpractial
</p>
</div>
</div>

<div id="outline-container-org4154253" class="outline-4">
<h4 id="org4154253"><span class="section-number-4">3.5.2.</span> Using Divide and Conquer and Merge sort</h4>
<div class="outline-text-4" id="text-3-5-2">
<p>
This problem can be solved very easily using merge sort.
Let’s consider the common top-down approach of merge sort.
</p>

<p>
Assume, there’re 2 functions.
</p>
<dl class="org-dl">
<dt><code>_mergeSort</code></dt><dd>Divides the array.</dd>
<dt><code>_merge</code></dt><dd>Compares elements of 2 sub-array, then merge them into 1 array.</dd>
</dl>

<p>
For this problem, we’ll modify the <code>_merge</code> function to get the required output.
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">_merge</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">ar</span><span style="color: #c678dd;">[]</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">low</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">mid</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">high</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">leftInd</span>=low, <span style="color: #dcaeea;">rightInd</span>=mid+<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #dcaeea;">temp</span><span style="color: #c678dd;">[</span>high-low+<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">]</span>, <span style="color: #dcaeea;">tempInd</span> = <span style="color: #da8548; font-weight: bold;">0</span>;

    <span style="color: #51afef;">while</span><span style="color: #c678dd;">(</span>leftInd&lt;=mid &amp;&amp; rightInd&lt;=high<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">if</span><span style="color: #98be65;">(</span>ar<span style="color: #a9a1e1;">[</span>leftInd<span style="color: #a9a1e1;">]</span> &lt;= ar<span style="color: #a9a1e1;">[</span>rightInd<span style="color: #a9a1e1;">]</span><span style="color: #98be65;">)</span> temp<span style="color: #98be65;">[</span>tempInd++<span style="color: #98be65;">]</span> = ar<span style="color: #98be65;">[</span>leftInd++<span style="color: #98be65;">]</span>;
        <span style="color: #51afef;">else</span> temp<span style="color: #98be65;">[</span>tempInd++<span style="color: #98be65;">]</span> = ar<span style="color: #98be65;">[</span>rightInd++<span style="color: #98be65;">]</span>;
    <span style="color: #c678dd;">}</span>

    <span style="color: #51afef;">while</span><span style="color: #c678dd;">(</span>leftInd &lt;= mid<span style="color: #c678dd;">)</span> temp<span style="color: #c678dd;">[</span>tempInd++<span style="color: #c678dd;">]</span> = ar<span style="color: #c678dd;">[</span>leftInd++<span style="color: #c678dd;">]</span>;

    <span style="color: #51afef;">while</span><span style="color: #c678dd;">(</span>rightInd&lt;=high<span style="color: #c678dd;">)</span> temp<span style="color: #c678dd;">[</span>tempInd++<span style="color: #c678dd;">]</span> = ar<span style="color: #c678dd;">[</span>rightInd++<span style="color: #c678dd;">]</span>;

    <span style="color: #51afef;">for</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span>=<span style="color: #da8548; font-weight: bold;">0</span>; i&lt;tempInd; i++<span style="color: #c678dd;">)</span> ar<span style="color: #c678dd;">[</span>low++<span style="color: #c678dd;">]</span> = temp<span style="color: #c678dd;">[</span>i<span style="color: #c678dd;">]</span>;
<span style="color: #51afef;">}</span>
</pre>
</div>

<p>
This is a sample code of typical <code>_merge</code> function. Here we check which part between 2 sub-array has the smaller element. Then we keep it into the additional array (in the code <code>temp</code>).
</p>

<p>
For this problem, instead of checking whether current value of left sub-array is less than or equal to current value of right sub-array, we’ll check whether current value of left sub-array is greater than double of current value of right sub-array.
That means, current value of left sub-array &gt; 2 * current value of right sub-array.
This is the main idea for solving the problem.
</p>


<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #5B6268;">// </span><span style="color: #5B6268;">Merge sort solution</span>
<span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">_merge</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">nums</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">low</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">mid</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">high</span>, <span style="color: #ECBE7B;">int</span> &amp;<span style="color: #dcaeea;">reversePairCount</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">leftInd</span> = low, <span style="color: #dcaeea;">rightInd</span> = mid+<span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #dcaeea;">r</span> = rightInd, <span style="color: #dcaeea;">temp</span><span style="color: #c678dd;">[</span>high-low+<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">]</span>, <span style="color: #dcaeea;">tempInd</span> = <span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #dcaeea;">counter</span> = <span style="color: #da8548; font-weight: bold;">0</span>;
    <span style="color: #5B6268;">// </span><span style="color: #5B6268;">4 6 8,  1 2 3</span>
    <span style="color: #51afef;">while</span><span style="color: #c678dd;">(</span>leftInd&lt;=mid<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">while</span><span style="color: #98be65;">(</span> r&lt;=high &amp;&amp; <span style="color: #a9a1e1;">(</span>nums<span style="color: #51afef;">[</span>leftInd<span style="color: #51afef;">]</span> &gt; <span style="color: #51afef;">(</span><span style="color: #ECBE7B;">long</span><span style="color: #51afef;">)</span><span style="color: #da8548; font-weight: bold;">2</span>*nums<span style="color: #51afef;">[</span>r<span style="color: #51afef;">]</span><span style="color: #a9a1e1;">)</span> <span style="color: #98be65;">)</span> counter++, r++;
        reversePairCount+= counter;
        <span style="color: #51afef;">while</span><span style="color: #98be65;">(</span> rightInd&lt;=high &amp;&amp; nums<span style="color: #a9a1e1;">[</span>rightInd<span style="color: #a9a1e1;">]</span>&lt;=nums<span style="color: #a9a1e1;">[</span>leftInd<span style="color: #a9a1e1;">]</span> <span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            temp<span style="color: #a9a1e1;">[</span>tempInd++<span style="color: #a9a1e1;">]</span> = nums<span style="color: #a9a1e1;">[</span>rightInd++<span style="color: #a9a1e1;">]</span>;
        <span style="color: #98be65;">}</span>
        temp<span style="color: #98be65;">[</span>tempInd++<span style="color: #98be65;">]</span> = nums<span style="color: #98be65;">[</span>leftInd++<span style="color: #98be65;">]</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">while</span><span style="color: #c678dd;">(</span>rightInd&lt;=high<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        temp<span style="color: #98be65;">[</span>tempInd++<span style="color: #98be65;">]</span> = nums<span style="color: #98be65;">[</span>rightInd++<span style="color: #98be65;">]</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">for</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span>=<span style="color: #da8548; font-weight: bold;">0</span>; i&lt;tempInd; i++<span style="color: #c678dd;">)</span> nums<span style="color: #c678dd;">[</span>low++<span style="color: #c678dd;">]</span> = temp<span style="color: #c678dd;">[</span>i<span style="color: #c678dd;">]</span>;
<span style="color: #51afef;">}</span>

<span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">_mergeSort</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">nums</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">low</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">high</span>, <span style="color: #ECBE7B;">int</span> &amp;<span style="color: #dcaeea;">reversePairCount</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>low &lt; high<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">mid</span> = low + <span style="color: #98be65;">(</span>high-low<span style="color: #98be65;">)</span>/<span style="color: #da8548; font-weight: bold;">2</span>;
        _mergeSort<span style="color: #98be65;">(</span>nums, low, mid, reversePairCount<span style="color: #98be65;">)</span>;
        _mergeSort<span style="color: #98be65;">(</span>nums, mid+<span style="color: #da8548; font-weight: bold;">1</span>, high, reversePairCount<span style="color: #98be65;">)</span>;
        _merge<span style="color: #98be65;">(</span>nums, low, mid, high, reversePairCount<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
<span style="color: #51afef;">}</span>

<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">reversePairs_ms</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">nums</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">reversePairCount</span> = <span style="color: #da8548; font-weight: bold;">0</span>;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">sz</span> = nums.size<span style="color: #c678dd;">()</span>;
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>sz&lt;=<span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">)</span> <span style="color: #51afef;">return</span> reversePairCount;
    _mergeSort<span style="color: #c678dd;">(</span>nums, <span style="color: #da8548; font-weight: bold;">0</span>, sz-<span style="color: #da8548; font-weight: bold;">1</span>, reversePairCount<span style="color: #c678dd;">)</span>;
    <span style="color: #51afef;">return</span> reversePairCount;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge01a574" class="outline-4">
<h4 id="orge01a574"><span class="section-number-4">3.5.3.</span> Using segment tree</h4>
<div class="outline-text-4" id="text-3-5-3">
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">seg</span><span style="color: #51afef;">[</span><span style="color: #da8548; font-weight: bold;">1000006</span><span style="color: #51afef;">]</span>;
<span style="color: #ECBE7B;">void</span> <span style="color: #c678dd;">update</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">ind</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">st</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">en</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">index</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>st == en<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        seg<span style="color: #98be65;">[</span>ind<span style="color: #98be65;">]</span>++;
        <span style="color: #51afef;">return</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">mid</span> = <span style="color: #c678dd;">(</span>st + en<span style="color: #c678dd;">)</span> &gt;&gt; <span style="color: #da8548; font-weight: bold;">1</span>;
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>index &lt;= mid<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        update<span style="color: #98be65;">(</span><span style="color: #da8548; font-weight: bold;">2</span> * ind + <span style="color: #da8548; font-weight: bold;">1</span>, st, mid, index<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">else</span> <span style="color: #c678dd;">{</span>
        update<span style="color: #98be65;">(</span><span style="color: #da8548; font-weight: bold;">2</span> * ind + <span style="color: #da8548; font-weight: bold;">2</span>, mid + <span style="color: #da8548; font-weight: bold;">1</span>, en, index<span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
    seg<span style="color: #c678dd;">[</span>ind<span style="color: #c678dd;">]</span> = seg<span style="color: #c678dd;">[</span><span style="color: #da8548; font-weight: bold;">2</span> * ind + <span style="color: #da8548; font-weight: bold;">1</span><span style="color: #c678dd;">]</span> + seg<span style="color: #c678dd;">[</span><span style="color: #da8548; font-weight: bold;">2</span> * ind + <span style="color: #da8548; font-weight: bold;">2</span><span style="color: #c678dd;">]</span>;
<span style="color: #51afef;">}</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">query</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">ind</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">st</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">en</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">l</span>, <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">r</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">en</span> <span style="color: #98be65;">&lt;</span> l || st <span style="color: #98be65;">&gt;</span> <span style="color: #dcaeea;">r</span> || st &gt; en<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">return</span> <span style="color: #da8548; font-weight: bold;">0</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">if</span><span style="color: #c678dd;">(</span>l &lt;= st &amp;&amp; en &lt;= r<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #51afef;">return</span> seg<span style="color: #98be65;">[</span>ind<span style="color: #98be65;">]</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">mid</span> = <span style="color: #c678dd;">(</span>st + en<span style="color: #c678dd;">)</span> &gt;&gt; <span style="color: #da8548; font-weight: bold;">1</span>;
    <span style="color: #51afef;">return</span> query<span style="color: #c678dd;">(</span><span style="color: #da8548; font-weight: bold;">2</span> * ind + <span style="color: #da8548; font-weight: bold;">1</span>, st, mid, l, r<span style="color: #c678dd;">)</span> + query<span style="color: #c678dd;">(</span><span style="color: #da8548; font-weight: bold;">2</span> * ind + <span style="color: #da8548; font-weight: bold;">2</span>, mid + <span style="color: #da8548; font-weight: bold;">1</span>, en, l, r<span style="color: #c678dd;">)</span>;
<span style="color: #51afef;">}</span>
<span style="color: #ECBE7B;">int</span> <span style="color: #c678dd;">reversePairs</span><span style="color: #51afef;">(</span><span style="color: #ECBE7B;">vector</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span>&amp; <span style="color: #dcaeea;">nums</span><span style="color: #51afef;">)</span> <span style="color: #51afef;">{</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">n</span> = nums.size<span style="color: #c678dd;">()</span>;
    <span style="color: #ECBE7B;">set</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">long</span> <span style="color: #ECBE7B;">long</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">st</span><span style="color: #c678dd;">(</span>nums.begin<span style="color: #98be65;">()</span>, nums.end<span style="color: #98be65;">()</span><span style="color: #c678dd;">)</span>;
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">cnt</span> = <span style="color: #da8548; font-weight: bold;">0</span>;
    <span style="color: #ECBE7B;">unordered_map</span><span style="color: #c678dd;">&lt;</span><span style="color: #ECBE7B;">int</span>, <span style="color: #ECBE7B;">int</span><span style="color: #c678dd;">&gt;</span> <span style="color: #dcaeea;">mp</span>;
    <span style="color: #51afef;">for</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> : st<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        mp<span style="color: #98be65;">[</span>i<span style="color: #98be65;">]</span> = cnt++;
    <span style="color: #c678dd;">}</span>
    <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">ans</span> = <span style="color: #da8548; font-weight: bold;">0</span>;
    <span style="color: #51afef;">for</span><span style="color: #c678dd;">(</span><span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">i</span> = <span style="color: #da8548; font-weight: bold;">0</span>; i &lt; n; i++<span style="color: #c678dd;">)</span> <span style="color: #c678dd;">{</span>
        <span style="color: #ECBE7B;">long</span> <span style="color: #ECBE7B;">long</span> <span style="color: #dcaeea;">rq</span> = nums<span style="color: #98be65;">[</span>i<span style="color: #98be65;">]</span> * <span style="color: #a9a1e1;">2</span><span style="color: #51afef;">ll</span> + <span style="color: #da8548; font-weight: bold;">1</span>;
        <span style="color: #51afef;">if</span><span style="color: #98be65;">(</span>st.find<span style="color: #a9a1e1;">(</span>rq<span style="color: #a9a1e1;">)</span> != st.end<span style="color: #a9a1e1;">()</span><span style="color: #98be65;">)</span> <span style="color: #98be65;">{</span>
            <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">l</span> = mp<span style="color: #a9a1e1;">[</span>rq<span style="color: #a9a1e1;">]</span>, <span style="color: #dcaeea;">r</span> = n - <span style="color: #da8548; font-weight: bold;">1</span>;
            ans += query<span style="color: #a9a1e1;">(</span><span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #da8548; font-weight: bold;">0</span>, n - <span style="color: #da8548; font-weight: bold;">1</span>, l, r<span style="color: #a9a1e1;">)</span>;
        <span style="color: #98be65;">}</span>
        <span style="color: #51afef;">else</span> <span style="color: #98be65;">{</span>
            <span style="color: #51afef;">auto</span> <span style="color: #dcaeea;">it</span> = st.lower_bound<span style="color: #a9a1e1;">(</span>rq<span style="color: #a9a1e1;">)</span>;
            <span style="color: #51afef;">if</span><span style="color: #a9a1e1;">(</span>it != st.end<span style="color: #51afef;">()</span><span style="color: #a9a1e1;">)</span> <span style="color: #a9a1e1;">{</span>
                <span style="color: #ECBE7B;">int</span> <span style="color: #dcaeea;">l</span> = mp<span style="color: #51afef;">[</span>*it<span style="color: #51afef;">]</span>, <span style="color: #dcaeea;">r</span> = n - <span style="color: #da8548; font-weight: bold;">1</span>;
                ans += query<span style="color: #51afef;">(</span><span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #da8548; font-weight: bold;">0</span>, n - <span style="color: #da8548; font-weight: bold;">1</span>, l, r<span style="color: #51afef;">)</span>;
            <span style="color: #a9a1e1;">}</span>
        <span style="color: #98be65;">}</span>
        update<span style="color: #98be65;">(</span><span style="color: #da8548; font-weight: bold;">0</span>, <span style="color: #da8548; font-weight: bold;">0</span>, n - <span style="color: #da8548; font-weight: bold;">1</span>, mp<span style="color: #a9a1e1;">[</span>nums<span style="color: #51afef;">[</span>i<span style="color: #51afef;">]</span><span style="color: #a9a1e1;">]</span><span style="color: #98be65;">)</span>;
    <span style="color: #c678dd;">}</span>
    <span style="color: #51afef;">return</span> ans;
<span style="color: #51afef;">}</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Boban Joksimoski</p>
<p class="date">Created: 2023-05-08 Mon 16:07</p>
</div>
</body>
</html>